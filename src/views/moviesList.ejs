<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Listado de Películas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <link rel="stylesheet" href="/css/style.css" />
    
  </head>

  <body>
    <div class="pagination">
        <% if (paginate.hasPreviousPages || paginate.hasNextPages(pagesCount)) { %>

            <% if (paginate.hasPreviousPages) { %>

              <li class="page-item">

                <a class="page-link" href="<%=paginate.href(true).prev%>" aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>

              <% } %>
                <% if (pages) { %>
                  <% pages.forEach(page=> { %>
                    <li class="page-number">
                      <a href="<%= page.url %>" class="page-link <%= page.number === currentPage && 'active' %> ">
                      <%= page.number%>
                      </a>
                    </li>

                    <% }) %>

                      <% } %>
                      <% if (paginate.hasNextPages(pagesCount)) { %>
                        <li class="page-item">
                          <a class="page-link" href="<%=paginate.href()%>" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                          </a>
                        </li>
                        <% } %>      
                          <% } %>    

      </ul>

      <form action="/movies/search" method="GET" class="d-flex">
        <input type="text" class="form-control">
        <button class="btn btn-outline-dark" type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
      </form>
   
    </div>
    <figure>
      <img src="/img/logo-DH.png" alt="Logo Digital House" />
    </figure>
    <h1>LISTADO DE PELÍCULAS</h1>
    <br />
    <p>
      <a class="botonAgregar" href="/movies/add">Agregar una Pelicula</a>
      <a class="botonVolver" href="/">inicio</a>
    </p>
    <br />
    <div class="buscar-titulo">
      <form action="/movies/buscar" method="GET">
        <input type="text" name="titulo" id="titulo" />
        <button class="boton-buscar" type="submit">Buscar una Pelicula</button>
      </form>
    </div>
    <ul>
      <% for( let i = 0; i < movies.length; i++ ) { %>
      <li>
        <a href="/movies/detail/<%= movies[i].id %>"><%= movies[i].title %></a>
      </li>
      <% } %>
    </ul>
  </body>
</html>
